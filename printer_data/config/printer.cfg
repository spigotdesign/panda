[include shell_command.cfg]
[include fluidd.cfg]
[include mainsail.cfg]
[include tuning/tuning.cfg]
#[include cartographer.cfg]
[include scanner.cfg]
[include K-ShakeTune/*.cfg]

## General Settings
[virtual_sdcard]
path: /home/biqu/printer_data/gcodes
on_error_gcode: CANCEL_PRINT

[include core/variables.cfg]

[idle_timeout]
timeout: 2400
gcode:
    RESPOND MSG="Idle timeout reached"
    TURN_OFF_HEATERS
    M84



#####################################################################
## 	                MCU
#####################################################################
[mcu]
# Query the ID of canbus：
# cd ~/CanBoot/scripts
# python3 flash_can.py -i can0 -q
canbus_uuid= d34bdfe3564a     
canbus_interface:can0

[mcu EBBCan]
canbus_uuid: d4d4bf93a883   

#####################################################################
##                     Model and acceleration
#####################################################################
[printer]
kinematics: corexy           # Printer type：corexy
max_velocity: 300            # Maximum speed (max. 300)
max_accel: 5000              # Maximum acceleration (max. 4000)
#max_accel_to_decel: 5000    # Maximum acceleration to deceleration (max. 4000) Deprecated
minimum_cruise_ratio: .5     # New parameter
max_z_velocity: 15           # Z-axis maximum speed
max_z_accel: 350             # Z-axis maximum acceleration
square_corner_velocity: 5.0  # Square corner speed

#####################################################################
##	                 Temperature Monitoring
#####################################################################
[include core/temperature_monitoring.cfg]

#####################################################################
##                  Axes and Steppers
#####################################################################
[include core/axes.cfg]

#####################################################################
##                  Extruder motor
#####################################################################
[include core/extruder.cfg]

#####################################################################
##                  Filament Inspection
#####################################################################
[include core/filament.cfg]

#####################################################################
## Heater Bed
#####################################################################
[include core/bed.cfg]

#####################################################################
## Bed Grid Calibration
#####################################################################
[include core/bed_calibration.cfg]

#####################################################################
## FANS
#####################################################################
[include core/fans.cfg]

#####################################################################
## LEDs
#####################################################################
[include core/leds.cfg]

#####################################################################
## 	                ADXL & Input Shaping
#####################################################################
[include core/input_shaper.cfg]

[board_pins]
aliases:
    # EXP1 header
    EXP1_1=PE8, EXP1_2=PE7,
    EXP1_3=PE9, EXP1_4=PE10,
    EXP1_5=PE12, EXP1_6=PE13,       # Slot in the socket on this side
    EXP1_7=PE14, EXP1_8=PE15,
    EXP1_9=<GND>, EXP1_10=<5V>,

    # EXP2 header
    EXP2_1=PA6, EXP2_2=PA5,
    EXP2_3=PB1, EXP2_4=PA4,
    EXP2_5=PB2, EXP2_6=PA7,         # Slot in the socket on this side
    EXP2_7=PC15, EXP2_8=<RST>,
    EXP2_9=<GND>, EXP2_10=PC5

#--------------------------------------------------------------------


#####################################################################
#	                GCODE MACROS 
#####################################################################
[include macros/print_start.cfg]
[include macros/print_end.cfg]
[include macros/pause_resume_cancel.cfg]
[include macros/filament_change.cfg]
[exclude_object]



[gcode_macro G32]
gcode:
    BED_MESH_CLEAR               # Unloading net beds
    G28                            # Homing all axes
    QUAD_GANTRY_LEVEL            # Gantry levelling
    G28                            # Homing all axes
    G0 X150 Y150 Z30 F3600         # 300mm
    #G0 X175 Y175 Z30 F3600         # 350mm

#--------------------------------------------------------------------


#--------------------------------------------------------------------


#--------------------------------------------------------------------

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  0.006989, 0.009150, -0.002866, 0.004991, -0.002640, -0.043707, -0.056259, -0.041253, -0.047088, -0.047466, -0.024266, 0.026620, 0.024690, -0.012168, -0.021036
#*# 	  0.024739, 0.023950, 0.011994, 0.021364, 0.018106, -0.026341, -0.039743, -0.024647, -0.026941, -0.035508, -0.009836, 0.047540, 0.043508, 0.012410, 0.001276
#*# 	  0.028677, 0.028315, 0.024365, 0.036380, 0.036430, -0.011163, -0.028887, -0.013484, -0.018208, -0.028514, 0.002667, 0.059381, 0.058427, 0.023857, 0.011844
#*# 	  0.030549, 0.030286, 0.024839, 0.048372, 0.056427, 0.011615, -0.014230, -0.008580, -0.016868, -0.021133, 0.004730, 0.065536, 0.066443, 0.029334, 0.019438
#*# 	  0.035839, 0.036675, 0.031096, 0.057226, 0.070729, 0.032174, -0.001856, 0.003715, -0.003594, -0.012890, 0.020479, 0.077923, 0.073208, 0.037903, 0.026479
#*# 	  0.038935, 0.045290, 0.040594, 0.059447, 0.063416, 0.018622, -0.001075, 0.006209, -0.005090, -0.009727, 0.018850, 0.078654, 0.074235, 0.035156, 0.025727
#*# 	  0.038283, 0.044765, 0.040550, 0.061072, 0.064749, 0.006470, -0.006569, 0.008385, -0.000172, 0.000296, 0.025406, 0.084953, 0.078819, 0.039505, 0.026690
#*# 	  0.034117, 0.038638, 0.037197, 0.058880, 0.062340, 0.002593, -0.017127, 0.000000, 0.002014, -0.007338, 0.023665, 0.078155, 0.072025, 0.036008, 0.030653
#*# 	  0.022839, 0.030763, 0.029597, 0.051169, 0.054908, -0.001643, -0.011923, 0.001122, -0.005738, -0.007283, 0.020347, 0.074942, 0.070938, 0.036629, 0.032752
#*# 	  0.023875, 0.024210, 0.027245, 0.048875, 0.050394, -0.003109, -0.010021, 0.006365, -0.006159, -0.013107, 0.015495, 0.071271, 0.065822, 0.034126, 0.024901
#*# 	  0.026917, 0.021249, 0.022750, 0.038876, 0.045866, -0.002331, -0.013599, 0.002936, -0.008562, -0.018948, 0.013985, 0.068716, 0.063599, 0.032386, 0.025064
#*# 	  0.034301, 0.034761, 0.024109, 0.037667, 0.040516, 0.000149, -0.009095, -0.000017, -0.011760, -0.018064, 0.012761, 0.062025, 0.066534, 0.033469, 0.026796
#*# 	  0.021341, 0.026468, 0.028293, 0.040948, 0.047445, -0.000252, -0.024182, -0.006760, -0.021504, -0.022232, 0.007190, 0.058312, 0.062502, 0.030583, 0.021126
#*# 	  0.015422, 0.022640, 0.026973, 0.041909, 0.044962, -0.011499, -0.027815, -0.011498, -0.032387, -0.036048, -0.002231, 0.048079, 0.044947, 0.017195, 0.009158
#*# 	  0.013392, 0.013482, 0.009515, 0.025036, 0.028791, -0.018137, -0.034661, -0.026233, -0.034139, -0.047334, -0.020441, 0.033965, 0.031974, 0.006735, 0.006997
#*# x_count = 15
#*# y_count = 15
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 30.0
#*# max_x = 270.0
#*# min_y = 30.0
#*# max_y = 270.0
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 51.552
#*# pid_ki = 1.403
#*# pid_kd = 473.636
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 25.500
#*# pid_ki = 2.152
#*# pid_kd = 75.542
#*#
#*# [scanner model default]
#*# model_coef = 1.4069657512109501,
#*# 	  1.833286433574469,
#*# 	  0.7137967782132278,
#*# 	  0.22910321110550386,
#*# 	  0.5324811283163869,
#*# 	  0.8494224977661161,
#*# 	  -0.4845494918755991,
#*# 	  -0.9892136679787076,
#*# 	  0.38122465766716435,
#*# 	  0.5287352863406238
#*# model_domain = 3.2504750277181304e-07,3.3728495298117404e-07
#*# model_range = 0.100000,5.000000
#*# model_temp = 25.750820
#*# model_offset = 0.45000
