[include shell_command.cfg]
[include fluidd.cfg]
[include mainsail.cfg]
[include tuning/tuning.cfg]
#[include cartographer.cfg]
[include scanner.cfg]
[include K-ShakeTune/*.cfg]

## General Settings
[virtual_sdcard]
path: /home/biqu/printer_data/gcodes
on_error_gcode: CANCEL_PRINT

[include core/variables.cfg]

[idle_timeout]
timeout: 2400
gcode:
    RESPOND MSG="Idle timeout reached"
    TURN_OFF_HEATERS
    M84



#####################################################################
## 	                MCU
#####################################################################
[mcu]
# Query the ID of canbus：
# cd ~/CanBoot/scripts
# python3 flash_can.py -i can0 -q
canbus_uuid= d34bdfe3564a     
canbus_interface:can0

[mcu EBBCan]
canbus_uuid: d4d4bf93a883   

#####################################################################
##                     Model and acceleration
#####################################################################
[printer]
kinematics: corexy           # Printer type：corexy
max_velocity: 300            # Maximum speed (max. 300)
max_accel: 5000              # Maximum acceleration (max. 4000)
#max_accel_to_decel: 5000    # Maximum acceleration to deceleration (max. 4000) Deprecated
minimum_cruise_ratio: .5     # New parameter
max_z_velocity: 15           # Z-axis maximum speed
max_z_accel: 350             # Z-axis maximum acceleration
square_corner_velocity: 5.0  # Square corner speed

#####################################################################
##	                 Temperature Monitoring
#####################################################################
[include core/temperature_monitoring.cfg]

#####################################################################
##                  Axes and Steppers
#####################################################################
[include core/axes.cfg]

#####################################################################
##                  Extruder motor
#####################################################################
[include core/extruder.cfg]

#####################################################################
##                  Filament Inspection
#####################################################################
[include core/filament.cfg]

#####################################################################
## Heater Bed
#####################################################################
[include core/bed.cfg]

#####################################################################
## Bed Grid Calibration
#####################################################################
[include core/bed_calibration.cfg]

#####################################################################
## FANS
#####################################################################
[include core/fans.cfg]

#####################################################################
## LEDs
#####################################################################
[include core/leds.cfg]

#####################################################################
## 	                ADXL & Input Shaping
#####################################################################
[include core/input_shaper.cfg]

[board_pins]
aliases:
    # EXP1 header
    EXP1_1=PE8, EXP1_2=PE7,
    EXP1_3=PE9, EXP1_4=PE10,
    EXP1_5=PE12, EXP1_6=PE13,       # Slot in the socket on this side
    EXP1_7=PE14, EXP1_8=PE15,
    EXP1_9=<GND>, EXP1_10=<5V>,

    # EXP2 header
    EXP2_1=PA6, EXP2_2=PA5,
    EXP2_3=PB1, EXP2_4=PA4,
    EXP2_5=PB2, EXP2_6=PA7,         # Slot in the socket on this side
    EXP2_7=PC15, EXP2_8=<RST>,
    EXP2_9=<GND>, EXP2_10=PC5

#--------------------------------------------------------------------


#####################################################################
#	                GCODE MACROS 
#####################################################################
[include macros/print_start.cfg]
[include macros/print_end.cfg]
[include macros/pause_resume_cancel.cfg]
[include macros/filament_change.cfg]
[exclude_object]



[gcode_macro G32]
gcode:
    BED_MESH_CLEAR               # Unloading net beds
    G28                            # Homing all axes
    QUAD_GANTRY_LEVEL            # Gantry levelling
    G28                            # Homing all axes
    G0 X150 Y150 Z30 F3600         # 300mm
    #G0 X175 Y175 Z30 F3600         # 350mm

#--------------------------------------------------------------------


#--------------------------------------------------------------------


#--------------------------------------------------------------------

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.021363, -0.011961, -0.026516, -0.010682, -0.022687, -0.060170, -0.066281, -0.041040, -0.051796, -0.051826, -0.032186, 0.018043, 0.003912, -0.040467, -0.052285
#*# 	  0.004267, 0.003281, 0.001908, 0.016200, 0.010931, -0.039623, -0.049414, -0.039476, -0.049928, -0.052833, -0.011725, 0.043147, 0.041279, 0.012111, 0.003730
#*# 	  0.007764, 0.010984, 0.009519, 0.028956, 0.023258, -0.019549, -0.035728, -0.019539, -0.039262, -0.043180, -0.010989, 0.041789, 0.046015, 0.025790, 0.020543
#*# 	  0.012106, 0.008974, 0.007407, 0.033441, 0.038558, -0.004291, -0.016837, -0.005196, -0.020903, -0.025151, 0.007246, 0.056477, 0.043813, 0.008804, -0.000747
#*# 	  0.017968, 0.019019, 0.017535, 0.043823, 0.053126, 0.014626, -0.012159, -0.003279, -0.020473, -0.009897, 0.030103, 0.090148, 0.061613, 0.028573, 0.020673
#*# 	  0.018999, 0.025350, 0.022664, 0.050338, 0.056314, 0.002332, -0.016141, -0.011097, -0.015935, -0.014872, 0.024685, 0.088706, 0.082002, 0.029273, 0.022037
#*# 	  0.018789, 0.022442, 0.024162, 0.047018, 0.050921, -0.005182, -0.005160, 0.013032, 0.002819, -0.007936, 0.010065, 0.067935, 0.057022, 0.033611, 0.030957
#*# 	  0.009721, 0.012340, 0.021657, 0.045699, 0.047115, -0.006435, -0.020251, 0.000000, -0.008955, -0.021960, 0.015154, 0.065159, 0.069244, 0.033738, 0.050715
#*# 	  0.001348, 0.007826, 0.011038, 0.039926, 0.041017, -0.014488, -0.030833, -0.015183, -0.017729, -0.011029, 0.021210, 0.082041, 0.073818, 0.057926, 0.057352
#*# 	  0.004514, 0.003952, 0.005531, 0.027200, 0.028739, -0.022685, -0.015914, 0.002816, -0.004101, -0.021156, 0.016399, 0.077773, 0.069065, 0.017063, 0.012756
#*# 	  -0.007239, -0.002354, 0.001462, 0.021316, 0.026088, -0.017241, -0.022101, -0.006838, -0.014415, -0.023146, 0.029583, 0.086244, 0.067127, 0.014197, 0.005369
#*# 	  -0.005277, 0.001999, 0.005737, 0.022674, 0.027342, -0.018492, -0.026096, -0.022369, -0.034509, -0.024388, 0.010316, 0.079519, 0.087564, 0.036312, 0.031919
#*# 	  -0.010057, -0.002492, 0.002572, 0.017193, 0.023904, -0.020279, -0.033085, -0.017507, -0.028534, -0.038666, 0.008988, 0.062922, 0.066564, 0.039573, 0.031071
#*# 	  -0.033234, -0.018664, -0.013513, 0.004444, 0.011478, -0.025853, -0.043339, -0.018208, -0.036692, -0.041309, -0.003089, 0.051538, 0.029138, -0.003537, 0.013847
#*# 	  -0.043975, -0.039487, -0.038422, -0.015228, -0.006973, -0.055152, -0.061457, -0.036963, -0.041497, -0.048866, -0.016874, 0.046453, 0.050149, 0.028618, 0.031971
#*# x_count = 15
#*# y_count = 15
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 30.0
#*# max_x = 270.0
#*# min_y = 30.0
#*# max_y = 270.0
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 51.552
#*# pid_ki = 1.403
#*# pid_kd = 473.636
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 25.500
#*# pid_ki = 2.152
#*# pid_kd = 75.542
#*#
#*# [scanner model default]
#*# model_coef = 1.4136809537678494,
#*# 	1.8417380462882547,
#*# 	0.7173826117915995,
#*# 	0.23431422759406118,
#*# 	0.49981859395284994,
#*# 	0.7852670329867572,
#*# 	-0.44294892747819514,
#*# 	-0.8878932530413889,
#*# 	0.36145956986028266,
#*# 	0.4770877101099954
#*# model_domain = 3.2473473056758754e-07,3.372367977842328e-07
#*# model_range = 0.100000,5.000000
#*# model_temp = 26.407823
#*# model_offset = -1.822
