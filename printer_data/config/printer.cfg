[include shell_command.cfg]
[include fluidd.cfg]
[include mainsail.cfg]
[include tuning/tuning.cfg]
[include cartographer.cfg]
[include K-ShakeTune/*.cfg]

## General Settings
[virtual_sdcard]
path: /home/biqu/printer_data/gcodes
on_error_gcode: CANCEL_PRINT

[include core/variables.cfg]

[idle_timeout]
timeout: 2400
gcode:
    RESPOND MSG="Idle timeout reached"
    TURN_OFF_HEATERS
    M84



#####################################################################
## 	                MCU
#####################################################################
[mcu]
# Query the ID of canbus：
# cd ~/CanBoot/scripts
# python3 flash_can.py -i can0 -q
canbus_uuid= d34bdfe3564a     
canbus_interface:can0

[mcu EBBCan]
canbus_uuid: d4d4bf93a883   

#####################################################################
##                     Model and acceleration
#####################################################################
[printer]
kinematics: corexy           # Printer type：corexy
max_velocity: 300            # Maximum speed (max. 300)
max_accel: 5000              # Maximum acceleration (max. 4000)
#max_accel_to_decel: 5000    # Maximum acceleration to deceleration (max. 4000) Deprecated
minimum_cruise_ratio: .5     # New parameter
max_z_velocity: 15           # Z-axis maximum speed
max_z_accel: 350             # Z-axis maximum acceleration
square_corner_velocity: 5.0  # Square corner speed

#####################################################################
##	                 Temperature Monitoring
#####################################################################
[include core/temperature_monitoring.cfg]

#####################################################################
##                  Axes and Steppers
#####################################################################
[include core/axes.cfg]

#####################################################################
##                  Extruder motor
#####################################################################
[include core/extruder.cfg]

#####################################################################
##                  Filament Inspection
#####################################################################
[include core/filament.cfg]

#####################################################################
## Heater Bed
#####################################################################
[include core/bed.cfg]

#####################################################################
## Bed Grid Calibration
#####################################################################
[include core/bed_calibration.cfg]

#####################################################################
## FANS
#####################################################################
[include core/fans.cfg]

#####################################################################
## LEDs
#####################################################################
[include core/leds.cfg]

#####################################################################
## 	                ADXL & Input Shaping
#####################################################################
[include core/input_shaper.cfg]

[board_pins]
aliases:
    # EXP1 header
    EXP1_1=PE8, EXP1_2=PE7,
    EXP1_3=PE9, EXP1_4=PE10,
    EXP1_5=PE12, EXP1_6=PE13,       # Slot in the socket on this side
    EXP1_7=PE14, EXP1_8=PE15,
    EXP1_9=<GND>, EXP1_10=<5V>,

    # EXP2 header
    EXP2_1=PA6, EXP2_2=PA5,
    EXP2_3=PB1, EXP2_4=PA4,
    EXP2_5=PB2, EXP2_6=PA7,         # Slot in the socket on this side
    EXP2_7=PC15, EXP2_8=<RST>,
    EXP2_9=<GND>, EXP2_10=PC5

#--------------------------------------------------------------------


#####################################################################
#	                GCODE MACROS 
#####################################################################
[include macros/print_start.cfg]
[include macros/print_end.cfg]
[include macros/pause_resume_cancel.cfg]
[include macros/filament_change.cfg]
[exclude_object]



[gcode_macro G32]
gcode:
    BED_MESH_CLEAR               # Unloading net beds
    G28                            # Homing all axes
    QUAD_GANTRY_LEVEL            # Gantry levelling
    G28                            # Homing all axes
    G0 X150 Y150 Z30 F3600         # 300mm
    #G0 X175 Y175 Z30 F3600         # 350mm

#--------------------------------------------------------------------


#--------------------------------------------------------------------


#--------------------------------------------------------------------

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [cartographer model default]
#*# model_coef = 1.4193925656550517,
#*# 	1.8445940790945488,
#*# 	0.743615711313402,
#*# 	0.2992478358583262,
#*# 	0.38996511261448724,
#*# 	0.4741927885551742,
#*# 	-0.28103211669992983,
#*# 	-0.40354406156222,
#*# 	0.2786824231070061,
#*# 	0.23748715850867969
#*# model_domain = 3.2516538810158783e-07,3.3753364222781164e-07
#*# model_range = 0.100000,5.000000
#*# model_temp = 50.830008
#*# model_offset = 0.05500
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	-0.019623, -0.015407, -0.023328, -0.013648, -0.018744, -0.061209, -0.068607, -0.051343, -0.056110, -0.059505, -0.034002, 0.015902, 0.007757, -0.025197, -0.037076
#*# 	-0.002654, 0.002711, -0.004576, 0.006396, 0.003104, -0.038897, -0.047144, -0.032955, -0.038088, -0.045235, -0.017335, 0.035913, 0.027304, -0.001707, -0.013006
#*# 	0.005152, 0.008329, 0.005834, 0.021673, 0.023291, -0.019213, -0.033712, -0.022332, -0.030985, -0.036370, -0.007239, 0.047668, 0.042011, 0.009174, -0.000984
#*# 	0.010888, 0.016377, 0.010653, 0.034445, 0.041466, 0.006489, -0.016985, -0.011978, -0.024559, -0.030153, 0.002776, 0.058480, 0.050287, 0.016773, 0.006408
#*# 	0.013853, 0.020848, 0.017684, 0.043729, 0.059796, 0.025105, -0.000693, -0.001016, -0.014859, -0.021523, 0.010685, 0.067015, 0.059982, 0.024543, 0.014274
#*# 	0.016355, 0.023555, 0.020839, 0.047224, 0.060304, 0.016026, -0.003731, 0.000022, -0.010493, -0.014363, 0.014389, 0.069012, 0.063749, 0.026214, 0.015857
#*# 	0.019692, 0.029327, 0.027449, 0.048439, 0.054559, 0.003940, -0.013051, 0.001446, -0.004655, -0.007372, 0.019870, 0.075326, 0.066599, 0.029344, 0.025131
#*# 	0.014990, 0.024557, 0.024503, 0.048594, 0.051357, -0.004678, -0.017795, 0.000000, -0.005073, -0.008666, 0.017188, 0.073540, 0.062423, 0.027061, 0.021926
#*# 	0.010662, 0.019605, 0.018845, 0.042818, 0.046399, -0.001672, -0.016824, 0.000957, -0.009271, -0.015741, 0.013675, 0.066289, 0.060994, 0.029846, 0.024106
#*# 	0.012896, 0.013954, 0.014992, 0.037200, 0.046561, -0.008594, -0.020228, -0.002072, -0.012074, -0.021245, 0.009826, 0.062500, 0.056720, 0.021190, 0.016894
#*# 	0.015004, 0.011625, 0.012092, 0.030134, 0.035262, -0.010200, -0.013930, -0.001733, -0.015851, -0.026281, 0.002931, 0.048988, 0.050997, 0.023383, 0.014014
#*# 	0.008135, 0.014875, 0.016243, 0.030791, 0.040654, -0.005450, -0.022609, -0.010301, -0.020917, -0.027296, 0.001389, 0.050338, 0.051434, 0.018446, 0.015206
#*# 	0.006769, 0.015327, 0.018405, 0.032868, 0.035429, -0.011337, -0.028569, -0.012516, -0.027424, -0.033065, -0.002836, 0.042995, 0.048624, 0.021306, 0.011139
#*# 	-0.011134, 0.001177, 0.003481, 0.018859, 0.027583, -0.021378, -0.047945, -0.033737, -0.039559, -0.047408, -0.020860, 0.031265, 0.029340, -0.004696, -0.007561
#*# 	-0.019835, -0.013401, -0.009547, 0.006117, 0.010379, -0.039906, -0.063246, -0.054139, -0.059795, -0.069103, -0.045419, 0.007488, 0.006378, -0.018469, -0.021940
#*# x_count = 15
#*# y_count = 15
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 30.0
#*# max_x = 270.0
#*# min_y = 30.0
#*# max_y = 270.0
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 51.552
#*# pid_ki = 1.403
#*# pid_kd = 473.636
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 25.500
#*# pid_ki = 2.152
#*# pid_kd = 75.542
#*#
#*# [cartographer model smooth-pei]
#*# model_coef = 1.4193925656550517,
#*# 	  1.8445940790945488,
#*# 	  0.743615711313402,
#*# 	  0.2992478358583262,
#*# 	  0.38996511261448724,
#*# 	  0.4741927885551742,
#*# 	  -0.28103211669992983,
#*# 	  -0.40354406156222,
#*# 	  0.2786824231070061,
#*# 	  0.23748715850867969
#*# model_domain = 3.2516538810158783e-07,3.3753364222781164e-07
#*# model_range = 0.100000,5.000000
#*# model_temp = 50.830008
#*# model_offset = 0.05500
