[include shell_command.cfg]
[include fluidd.cfg]
[include mainsail.cfg]
[include tuning/tuning.cfg]
#[include cartographer.cfg]
[include scanner.cfg]
[include K-ShakeTune/*.cfg]

## General Settings
[virtual_sdcard]
path: /home/biqu/printer_data/gcodes
on_error_gcode: CANCEL_PRINT

[include core/variables.cfg]

[idle_timeout]
timeout: 2400
gcode:
    RESPOND MSG="Idle timeout reached"
    TURN_OFF_HEATERS
    M84



#####################################################################
## 	                MCU
#####################################################################
[mcu]
# Query the ID of canbus：
# cd ~/CanBoot/scripts
# python3 flash_can.py -i can0 -q
canbus_uuid= d34bdfe3564a     
canbus_interface:can0

[mcu EBBCan]
canbus_uuid: d4d4bf93a883   

#####################################################################
##                     Model and acceleration
#####################################################################
[printer]
kinematics: corexy           # Printer type：corexy
max_velocity: 300            # Maximum speed (max. 300)
max_accel: 5000              # Maximum acceleration (max. 4000)
#max_accel_to_decel: 5000    # Maximum acceleration to deceleration (max. 4000) Deprecated
minimum_cruise_ratio: .5     # New parameter
max_z_velocity: 15           # Z-axis maximum speed
max_z_accel: 350             # Z-axis maximum acceleration
square_corner_velocity: 5.0  # Square corner speed

#####################################################################
##	                 Temperature Monitoring
#####################################################################
[include core/temperature_monitoring.cfg]

#####################################################################
##                  Axes and Steppers
#####################################################################
[include core/axes.cfg]

#####################################################################
##                  Extruder motor
#####################################################################
[include core/extruder.cfg]

#####################################################################
##                  Filament Inspection
#####################################################################
[include core/filament.cfg]

#####################################################################
## Heater Bed
#####################################################################
[include core/bed.cfg]

#####################################################################
## Bed Grid Calibration
#####################################################################
[include core/bed_calibration.cfg]

#####################################################################
## FANS
#####################################################################
[include core/fans.cfg]

#####################################################################
## LEDs
#####################################################################
[include core/leds.cfg]

#####################################################################
## 	                ADXL & Input Shaping
#####################################################################
[include core/input_shaper.cfg]

[board_pins]
aliases:
    # EXP1 header
    EXP1_1=PE8, EXP1_2=PE7,
    EXP1_3=PE9, EXP1_4=PE10,
    EXP1_5=PE12, EXP1_6=PE13,       # Slot in the socket on this side
    EXP1_7=PE14, EXP1_8=PE15,
    EXP1_9=<GND>, EXP1_10=<5V>,

    # EXP2 header
    EXP2_1=PA6, EXP2_2=PA5,
    EXP2_3=PB1, EXP2_4=PA4,
    EXP2_5=PB2, EXP2_6=PA7,         # Slot in the socket on this side
    EXP2_7=PC15, EXP2_8=<RST>,
    EXP2_9=<GND>, EXP2_10=PC5

#--------------------------------------------------------------------


#####################################################################
#	                GCODE MACROS 
#####################################################################
[include macros/print_start.cfg]
[include macros/print_end.cfg]
[include macros/pause_resume_cancel.cfg]
[include macros/filament_change.cfg]
[exclude_object]



[gcode_macro G32]
gcode:
    BED_MESH_CLEAR               # Unloading net beds
    G28                            # Homing all axes
    QUAD_GANTRY_LEVEL            # Gantry levelling
    G28                            # Homing all axes
    G0 X150 Y150 Z30 F3600         # 300mm
    #G0 X175 Y175 Z30 F3600         # 350mm

#--------------------------------------------------------------------


#--------------------------------------------------------------------


#--------------------------------------------------------------------

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	-0.046251, -0.055375, -0.048195, -0.018381, -0.068831, -0.100636, -0.079208, -0.051113, -0.045580, -0.045900, -0.027284, -0.014324, -0.043700, -0.065679, -0.048614
#*# 	-0.031575, -0.040552, -0.032515, -0.000610, -0.053178, -0.084616, -0.062198, -0.032957, -0.026342, -0.029570, -0.007097, 0.004828, -0.023551, -0.044481, -0.026746
#*# 	-0.031771, -0.036608, -0.022695, 0.011051, -0.033628, -0.067180, -0.055066, -0.025602, -0.012094, -0.019746, 0.001087, 0.013387, -0.016138, -0.031482, -0.011996
#*# 	-0.024358, -0.029589, -0.018425, 0.020413, -0.016058, -0.048254, -0.042212, -0.015791, -0.005690, -0.012224, 0.008024, 0.025429, -0.003189, -0.022102, 0.000026
#*# 	-0.019382, -0.022736, -0.008481, 0.035089, -0.001812, -0.030518, -0.024678, -0.003130, 0.003279, -0.006302, 0.020851, 0.037193, 0.004179, -0.012469, 0.004842
#*# 	-0.013072, -0.018533, -0.002902, 0.032992, -0.004115, -0.038595, -0.021629, 0.000748, 0.004136, -0.002532, 0.024592, 0.041091, 0.008401, -0.012234, 0.004303
#*# 	-0.007878, -0.017319, -0.002301, 0.038863, -0.002024, -0.043481, -0.033520, 0.003007, 0.011830, 0.002505, 0.029289, 0.043887, 0.011742, -0.006269, 0.011474
#*# 	-0.017901, -0.024266, -0.004862, 0.033920, -0.010084, -0.046263, -0.034904, 0.000000, 0.007795, 0.002581, 0.029784, 0.044218, 0.006028, -0.010467, 0.009319
#*# 	-0.022585, -0.031850, -0.012497, 0.026372, -0.014292, -0.051253, -0.033873, 0.001675, 0.005602, 0.001782, 0.029201, 0.038099, 0.004095, -0.013736, 0.005270
#*# 	-0.022433, -0.033461, -0.013108, 0.022424, -0.017112, -0.049730, -0.031391, -0.003564, -0.000120, -0.005684, 0.025367, 0.034142, 0.008929, -0.009633, 0.005586
#*# 	-0.025184, -0.032414, -0.016417, 0.014930, -0.027967, -0.057905, -0.035784, -0.005502, -0.001370, -0.005490, 0.028162, 0.038175, 0.001628, -0.013699, 0.011909
#*# 	-0.024813, -0.022599, -0.015092, 0.021626, -0.029924, -0.049245, -0.030796, -0.002677, 0.001278, -0.005162, 0.020997, 0.028594, -0.001792, -0.015470, 0.010214
#*# 	-0.031182, -0.033296, -0.013296, 0.024120, -0.018256, -0.046777, -0.038315, -0.006927, -0.004945, -0.008948, 0.014027, 0.018109, -0.015967, -0.024490, 0.003743
#*# 	-0.035264, -0.041800, -0.026966, 0.012140, -0.025835, -0.055535, -0.060687, -0.022303, -0.014042, -0.032214, -0.009375, -0.000509, -0.031365, -0.043185, -0.012692
#*# 	-0.036475, -0.040085, -0.027414, 0.009311, -0.036040, -0.068352, -0.059020, -0.034585, -0.033422, -0.043311, -0.018737, -0.009783, -0.038824, -0.048909, -0.018016
#*# x_count = 15
#*# y_count = 15
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 30.0
#*# max_x = 270.0
#*# min_y = 30.0
#*# max_y = 270.0
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 51.552
#*# pid_ki = 1.403
#*# pid_kd = 473.636
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 25.500
#*# pid_ki = 2.152
#*# pid_kd = 75.542
#*#
#*# [scanner model default]
#*# model_coef = 1.4092218302652881,
#*# 	1.8349739879373523,
#*# 	0.7582507186342511,
#*# 	0.33135887612246184,
#*# 	0.33613218761189323,
#*# 	0.3501056920631789,
#*# 	-0.21286963195832356,
#*# 	-0.25002679609147205,
#*# 	0.25988587247979067,
#*# 	0.1852910200393291
#*# model_domain = 3.2487053872399243e-07,3.3727082991918633e-07
#*# model_range = 0.100000,5.000000
#*# model_temp = 25.430194
#*# model_offset = 0.104
